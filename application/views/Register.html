<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="scripts/scripts.js"></script>

    <script src="scripts/http.js"></script>
</head>
<body>
    <div class="container">
        <h2>Register</h2>
        <form action="action.php" method="post">
        <div class="row">
            <div class="form-group col-sm-6 col-md-6 col-lg-6">
                <label for="firstname">First Name:</label>
                <input class="form-control" id="firstname" name="firstname" type="text" placeholder="Enter first name" required>
            </div>
            <div class="form-group col-sm-6 col-md-6 col-lg-6">
                <label for="lastname">Last Name:</label>
                <input class="form-control" id="lastname" name="lastname" type="text" placeholder="Enter last name" required>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-sm-6 col-md-6 col-lg-6">
                <label for="Email">Email Address:</label>
                <input class="form-control" id="email" name="email" type="email" placeholder="Enter email address" required>
            </div>
            <div class="form-group col-sm-6 col-md-6 col-lg-6">
                <label for="Email_confirm">Confirm Email Address:</label>
                <input class="form-control" id="email_confirm" name="email_confirm" type="email" placeholder="Re-enter email address" required>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-sm-12 col-md-12 col-lg-12">
                <label for="username">Username:</label>
                <input class="form-control" id="username" name="username" type="text" placeholder="Enter username" required>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-sm-6 col-md-6 col-lg-6">
                <label for="password">Password:</label>
                <input class="form-control" id="password" name="password" type="password" placeholder="Enter password" required>
            </div>
            <div class="form-group col-sm-6 col-md-6 col-lg-6">
                <label for="Email_confirm">Confirm Password:</label>
                <input class="form-control" id="password_confirm" name="password_confirm" type="password" placeholder="Re-enter password" required>
            </div>
        </div>
        <a href="ForgotPassword.html"><input type="submit" value="Sign Up" class="btn btn-info"></a>
        <a href=""><input type="submit" value="Do Sign Up" class="btn btn-info" id="sign_up_button" onclick="new Register();"></a>
        <p></p>
        <a href="TestClientLogin.html"><p>Already have an account? Sign in.</p></a>
        </form>
    </div>
    <script>
        function Server(address) {

            this.address = address;

            this.http = new XMLHttpRequest();

            this.get = function (param) {
                let args = "";
                for (let i = 0; i < param.length; i++) {
                    args += ("/" + param[i]);
                }
                this.http.open('GET', this.address + args, true);
            };

            this.post = function (param) {
                alert(param.length);
                let args = "";
                for (let i = 0; i < param.length; i++) {
                    args += ("/" + param[i]);
                }
                alert(this.address + args);
                let httpString = this.address + args;
                alert("http string: " + httpString);
                //this.http.open("POST", httpString, true);
                this.http.open("GET", "http://localhost/gatekeeper/index.php/ClientAuth/null/123123123/123123/123123/jack", true);

                http.send();
                alert("post post");
                alert(http.readyState + " " + http.status);
            };

            this.put = function (param) {
                let args = "";
                for (let i = 0; i < param.length; i++) {
                    args += ("/" + param[i]);
                }
                this.http.open('PUT', this.address + args, true);
            };
        }


        function Register() {
            this.address = "http://localhost/gatekeeper/index.php/ClientAuth";

            this.username = document.getElementById("username").value;
            this.email = document.getElementById("email").value;
            this.password = document.getElementById("password").value;

            /*
            alert(this.username);
            alert(this.email);
            alert(this.password);

            return; // TODO : FOR TEST
            */

            this.server = new Server(this.address);

            this.signup = function () {
                // TODO : Call http
                let request;
                //if (this.confirmPassword()) {
                request = [null, this.username, this.email, this.password, "jackshit"];
                this.server.post(request);
                //} else {
                // TODO : Handle passwords don't match
                //}
            };

            this.confirmPassword = function () {
                // TODO : Compare fields
            };

            this.validateUsername = function () {
                // TODO : Call http
                // TODO : Create backend functionality
            };

            this.validateEmail = function () {
                // TODO : Call http
                // TODO : Create backend functionality
            };

            this.signup();
        }
    </script>
</body>
</html>